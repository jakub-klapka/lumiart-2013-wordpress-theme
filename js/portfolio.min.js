(function(d){var g={init:function(){this.list=d(".portfolio_list");this.pagination=d(".portfolio_list_pagination");this.lis=this.list.find("li");this.number_of_visible=3;this.number_of_pages=Math.ceil(this.lis.length/this.number_of_visible);this.active_page=1;this.next_button=this.pagination.find(".next");this.prev_button=this.pagination.find(".prev");this.pagination_counter_current=this.pagination.find(".page .current");this.window=d(window);this.page_wrap=d(".page_wrap");this.indicator_list=d(".portfolio_list_indicator");
this.article_indicator=d(".article_active_indicator");this.connect_link=this.indicator_list.find(".connect_link");this.initial_hash=window.location.hash?!0:!1;this.correct_indicator_after_width();this.setIndicatorTop();this.bindEvents()},bindEvents:function(){var a=this;this.next_button.on("click.lumi_testimonials",function(){a.active_page<a.number_of_pages&&a.changePage(a.active_page+1)});this.prev_button.on("click.lumi_testimonials",function(){1<a.active_page&&a.changePage(a.active_page-1)});this.window.on("resize",
function(){a.correct_indicator_after_width();a.setIndicatorTop()})},changePage:function(a){var b=this,c=this.lis.filter(".visible");c.fadeOut(300,function(){c.removeClass("visible");var d=(a-1)*b.number_of_visible,e=b.lis.slice(d,d+b.number_of_visible);e.fadeIn(300,function(){e.addClass("visible");b.initial_hash&&b.checkShowHideIndicators(!1,!0)&&b.setIndicatorTop()});b.active_page=a;b.pagination_counter_current.html(b.active_page)});this.checkShowHideIndicators(a)},correct_indicator_after_width:function(){if("mobile"!==
window.lumi_responsive_current){var a="desktop"===window.lumi_responsive_current?0.04:0.06,a=this.page_wrap.width()*a-30;this.connect_link.width(a)}},setIndicatorTop:function(){if("mobile"!==window.lumi_responsive_current){var a=this.lis.filter(".active").position();this.indicator_list.css("top",a.top)}},checkShowHideIndicators:function(a,b){a=a?a:this.active_page;var c=this.lis.index(this.lis.filter(".active"))+1,c=c>(a-1)*this.number_of_visible&&c<=a*this.number_of_visible?!0:!1;if(b)return c;c?
this.indicator_list.add(this.article_indicator).removeClass("list_hidden"):this.indicator_list.add(this.article_indicator).addClass("list_hidden")},switchActive:function(a){a=d(a);this.lis.filter(".active").removeClass("active");a.parent("li").addClass("active");this.checkShowHideIndicators();this.setIndicatorTop()}},h={init:function(a){this.pagination_instance=a;this.client_content=d(".portfolio_client_content");this.template_file=this.client_content.data("hb-template-name");this.list=d(".portfolio_list");
this.bindEvents();this.checkForHash()},bindEvents:function(){var a=function(a){a.preventDefault();a=d(this);b.loadClient(a.attr("href"),d(this),a.data("slug"))},b=this;if("mobile"!==window.lumi_responsive_current)this.list.on("click.portfolio_switching","a",a);d(document).on("lumi_responsive_change",function(c){"mobile"===c.new_width&&b.list.off("click.portfolio_switching");if("mobile"===c.old_width)b.list.on("click.portfolio_switching","a",a)})},checkForHash:function(){var a=window.location.hash;
a&&(a=a.substr(1),a=this.list.find("a").filter("[data-slug="+a+"]"),0<a.length&&("mobile"===window.lumi_responsive_current?window.location=a.attr("href"):this.loadClient(a.attr("href"),a,a.data("slug"))))},loadClient:function(a,b,c){this.showHidePreloader("show",b);var f=d.ajax({dataType:"json",url:a+"json/"}),e=this;f.done(function(a){e.processTemplate(a);e.pagination_instance.switchActive(b);e.showHidePreloader("hide",b);window.location.hash=c});f.fail(function(){alert("N\u011bco nezafungovalo spr\u00e1vn\u011b, portfolio se otev\u0159e v nouzov\u00e9m re\u017eimu a moc n\u00e1m pom\u016f\u017eete, pokud n\u00e1m o tom nap\u00ed\u0161ete.");
window.location=a})},showHidePreloader:function(a,b){var c=b.find(".preloader");"show"===a?c.addClass("active"):c.removeClass("active")},processTemplate:function(a){var b=Handlebars.templates[this.template_file](a),c=this;this.client_content.fadeOut(300,function(){c.client_content.html(b).fadeIn(300);c.functionsOnNewDomReady()})},functionsOnNewDomReady:function(){"function"===typeof window.picturefill&&window.picturefill();"undefined"!==typeof addthis&&"function"===typeof addthis.toolbox&&(addthis.toolbox("#addthis_toolbox"),
addthis.counter("#atcounter"));d.event.trigger("lumiart_portfolio_change_loaded")}};d(document).ready(function(){var a=Object.create(g);a.init();h.init(a)})})(jQuery);
